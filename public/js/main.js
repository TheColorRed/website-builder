"use strict";var builder;!function(e){async function t(e){let t="string"==typeof e?document.querySelector(e):e;if(!t.reportValidity())return;let r=new FormData(t),n={};Array.from(r.entries()).forEach(e=>{let[t,r]=e;n[t]="string"==typeof r?r.trim():r});let a=await fetch(t.action,{method:t.method,body:JSON.stringify(n),headers:{"X-Requested-With":"XMLHttpRequest"}}),i=await a.text();try{return JSON.parse(i)}catch(e){return i}}e.toKeyValue=function(e){return Array.from(e).reduce((e,t)=>(e[t.name]=t.value||"",e),{})},e.send=async function(e,t={},r="get"){let n={method:r};Object.keys(t).length>0&&(n.body=JSON.stringify(t)),n.headers={"X-Requested-With":"XMLHttpRequest"};let a=await fetch(e,n),i=await a.text();try{return JSON.parse(i)}catch(e){return i}},e.submit=t,document.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll("form.ajax")).forEach(r=>{r.addEventListener("submit",async function(r){r.preventDefault();let n=await t(this);if(this.hasAttribute("callback")){let t=this.getAttribute("callback");e[t](n)}})})})}(builder||(builder={})),builder||(builder={}),document.addEventListener("DOMContentLoaded",e=>{Array.from(document.querySelectorAll(".toggle-password")).forEach(e=>{let t=e.querySelector(".toggle"),r=e.querySelector("input[type=password]");t.addEventListener("click",e=>e.preventDefault()),r instanceof HTMLInputElement&&"password"==r.type&&t.addEventListener("click",()=>{r.type="password"==r.type?"text":"password";let e=t.querySelector("i");e&&(e.classList.toggle("fa-eye-slash","text"==r.type),e.classList.toggle("fa-eye","password"==r.type))})})}),function(e){document.addEventListener("DOMContentLoaded",t=>{function r(e){return e.replace(/[^\w\s]+/g,"").replace(/\s/g,"-").replace(/-$/g,"").toLowerCase()}function n(e){let t=e.checkValidity();e.classList.toggle("required",!t)}let a=document.querySelector("#install");a&&a.addEventListener("click",async t=>{t.preventDefault();let r=await e.submit(a.closest("form"));r.error?alert(r.message):window.location.href=REDIRECT_TO});let i=document.querySelector("#test-connection");i&&i.addEventListener("click",async t=>{let r=document.querySelectorAll("input[name^=db-]"),n=await e.send(TEST_CONN,e.toKeyValue(r),"post");n.error?alert(n.message):alert("Connection successful")});let o=document.querySelector("[name=website-title]"),l=document.querySelector("[name=db-database]");o&&l&&(l.value=r(o.value),o.addEventListener("input",function(){l.classList.contains("sync")&&(l.value=r(o.value))}),l.addEventListener("input",function(){l.classList.remove("sync")}));let s=document.querySelector(".re-sync");if(s&&s.addEventListener("click",e=>{e.preventDefault(),l&&l.classList.add("sync"),l&&o&&(l.value=r(o.value)),n(l)}),a){let e=a.closest("form");e&&Array.from(e.querySelectorAll("text,password,email,number".replace(/\w+/g,"input[type=$&]"))).forEach(e=>{n(e),e.addEventListener("input",function(){this.required&&n(e)})})}})}(builder||(builder={})),function(e){e.adminLogin=function(e){e.error||(window.location.href=e.location)}}(builder||(builder={}));