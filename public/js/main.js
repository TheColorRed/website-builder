"use strict";var builder;!function(e){e.toKeyValue=function(e){return Array.from(e).reduce((e,t)=>(e[t.name]=t.value,e),{})},e.send=async function(e,t={},r="get"){let n={method:r};Object.keys(t).length>0&&(n.body=JSON.stringify(t));let a=await fetch(e,n),l=await a.text();try{return JSON.parse(l)}catch(e){return l}},e.submit=async function(e){let t="string"==typeof e?document.querySelector(e):e;if(!t.reportValidity())return;let r=new FormData(t),n={};Array.from(r.entries()).forEach(e=>{let[t,r]=e;n[t]="string"==typeof r?r.trim():r});let a=await fetch(t.action,{method:t.method,body:JSON.stringify(n)}),l=await a.text();try{return JSON.parse(l)}catch(e){return l}}}(builder||(builder={})),builder||(builder={}),document.addEventListener("DOMContentLoaded",e=>{Array.from(document.querySelectorAll(".toggle-password")).forEach(e=>{let t=e.querySelector(".toggle"),r=e.querySelector("input[type=password]");t.addEventListener("click",e=>e.preventDefault()),r instanceof HTMLInputElement&&"password"==r.type&&t.addEventListener("click",()=>{r.type="password"==r.type?"text":"password";let e=t.querySelector("i");e&&(e.classList.toggle("fa-eye-slash","text"==r.type),e.classList.toggle("fa-eye","password"==r.type))})})}),function(e){document.addEventListener("DOMContentLoaded",t=>{function r(e){return e.replace(/[^\w\s]+/g,"").replace(/\s/g,"-").replace(/-$/g,"").toLowerCase()}function n(e){let t=e.checkValidity();e.classList.toggle("required",!t)}let a=document.querySelector("#install");a.addEventListener("click",t=>{e.submit(a.closest("form"))});let l=document.querySelector("#test-connection");l&&l.addEventListener("click",async t=>{let r=document.querySelectorAll("input[name^=db-]"),n=await e.send("/install/testMongoConnection",e.toKeyValue(r),"post");n.error?alert(n.message):alert("Connection successful")});let s=document.querySelector("[name=website-title]"),o=document.querySelector("[name=db-database]");s&&o&&(o.value=r(s.value),s.addEventListener("input",function(){o.classList.contains("sync")&&(o.value=r(s.value))}),o.addEventListener("input",function(){o.classList.remove("sync")}));let c=document.querySelector(".re-sync");c&&c.addEventListener("click",e=>{e.preventDefault(),o&&o.classList.add("sync"),o&&s&&(o.value=r(s.value)),n(o)});let i=a.closest("form");Array.from(i.querySelectorAll("text,password,email,number".replace(/\w+/g,"input[type=$&]"))).forEach(e=>{n(e),e.addEventListener("input",function(){this.required&&n(e)})})})}(builder||(builder={}));