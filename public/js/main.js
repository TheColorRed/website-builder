"use strict";var builder;!function(e){async function t(e,t={},n="get"){let r={method:n};"post"==n&&Object.keys(t).length>0?r.body=JSON.stringify(t):"get"==n&&Object.keys(t).length>0&&(e+="?"+Object.keys(t).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e])).join("&"));let a="",o=document.querySelector("meta[name=csrf]");o&&(a=o.content),r.headers={"X-Requested-With":"XMLHttpRequest"},a.length>0&&(r.headers["X-CSRF-Token"]=a);let s=await fetch(e,r),i=await s.text();try{return JSON.parse(i)}catch(e){return i}}async function n(e){let n="string"==typeof e?document.querySelector(e):e;if(!n.reportValidity())return;let r=new FormData(n),a={};Array.from(r.entries()).forEach(e=>{let[t,n]=e;a[t]="string"==typeof n?n.trim():n}),await t(n.action,a,n.method)}e.toKeyValue=function(e){return Array.from(e).reduce((e,t)=>(e[t.name]=t.value||"",e),{})},e.send=t,e.submit=n,document.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll("form.ajax")).forEach(t=>{t.addEventListener("submit",async function(t){t.preventDefault();let r=await n(this);if(this.hasAttribute("callback")){let t=this.getAttribute("callback");e[t](r)}})})})}(builder||(builder={})),builder||(builder={}),document.addEventListener("DOMContentLoaded",e=>{Array.from(document.querySelectorAll(".toggle-password")).forEach(e=>{let t=e.querySelector(".toggle"),n=e.querySelector("input[type=password]");t.addEventListener("click",e=>e.preventDefault()),n instanceof HTMLInputElement&&"password"==n.type&&t.addEventListener("click",()=>{n.type="password"==n.type?"text":"password";let e=t.querySelector("i");e&&(e.classList.toggle("fa-eye-slash","text"==n.type),e.classList.toggle("fa-eye","password"==n.type))})})}),function(e){document.addEventListener("DOMContentLoaded",t=>{function n(e){return e.replace(/[^\w\s]+/g,"").replace(/\s/g,"-").replace(/-$/g,"").toLowerCase()}function r(e){let t=e.checkValidity();e.classList.toggle("required",!t)}let a=document.querySelector("#install");a&&a.addEventListener("click",async t=>{t.preventDefault();let n=await e.submit(a.closest("form"));n.error?alert(n.message):window.location.href=REDIRECT_TO});let o=document.querySelector("#test-connection");o&&o.addEventListener("click",async t=>{let n=document.querySelectorAll("input[name^=db-]"),r=await e.send(TEST_CONN,e.toKeyValue(n),"post");r.error?alert(r.message):alert("Connection successful")});let s=document.querySelector("[name=website-title]"),i=document.querySelector("[name=db-database]");s&&i&&(i.value=n(s.value),s.addEventListener("input",function(){i.classList.contains("sync")&&(i.value=n(s.value))}),i.addEventListener("input",function(){i.classList.remove("sync")}));let l=document.querySelector(".re-sync");if(l&&l.addEventListener("click",e=>{e.preventDefault(),i&&i.classList.add("sync"),i&&s&&(i.value=n(s.value)),r(i)}),a){let e=a.closest("form");e&&Array.from(e.querySelectorAll("text,password,email,number".replace(/\w+/g,"input[type=$&]"))).forEach(e=>{r(e),e.addEventListener("input",function(){this.required&&r(e)})})}})}(builder||(builder={})),function(e){e.adminLogin=function(e){e.error||(window.location.href=e.location)}}(builder||(builder={})),function(e){document.addEventListener("DOMContentLoaded",()=>{Array.from(document.querySelectorAll(".trash-delete, .trash-restore")).forEach(t=>{t.addEventListener("click",async function(t){t.preventDefault();let n=this.closest("[data-id]");if(n){let t=n.querySelector(".spinner");t&&t.classList.remove("hidden"),this.classList.add("hidden");let r=n.getAttribute("data-id");if(r&&r.length>0){let t=this.classList.contains("trash-delete")?TRASH_URL:TRASH_RESTORE_URL;await e.send(t,{id:r},"post"),n.remove()}}})})})}(builder||(builder={}));